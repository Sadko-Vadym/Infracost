# –ó–≤—ñ—Ç –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –∑ Infracost

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ

–Ø —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–≥–æ—Ç—É–≤–∞–≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Infracost! –û—Å—å —â–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é ‚úÖ
- –°–∫–ª–æ–Ω—É–≤–∞–≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∑ Terraform –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –¥–ª—è GKE –∫–ª–∞—Å—Ç–µ—Ä–∞
- –ü—ñ–¥–∫–ª—é—á–∏–≤ –¥–æ –≤–∞—à–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é: https://github.com/Sadko-Vadym/Infracost
- –í—ñ–¥–ø—Ä–∞–≤–∏–≤ –∫–æ–¥ —É –≥—ñ–ª–∫—É `main`

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Terraform ‚úÖ
- –ü–µ—Ä–µ–≤—ñ—Ä–∏–≤ —É—Å—ñ —Ñ–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó (main.tf, variables.tf, terraform.tf)
- –î–æ–¥–∞–≤ `.gitignore` –¥–ª—è Terraform
- –°—Ç–≤–æ—Ä–∏–≤ `terraform.tfvars.example` —è–∫ —à–∞–±–ª–æ–Ω –¥–ª—è –∑–º—ñ–Ω–Ω–∏—Ö

### 3. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Infracost ‚úÖ
- –°—Ç–≤–æ—Ä–∏–≤ GitHub Actions workflow —É —Ñ–∞–π–ª—ñ `.github/workflows/infracost.yml`
- Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ Pull Request –∑ –∑–º—ñ–Ω–∞–º–∏ Terraform —Ñ–∞–π–ª—ñ–≤
- –ù–∞–ø–∏—Å–∞–≤ –¥–µ—Ç–∞–ª—å–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ `INFRACOST_SETUP.md`

### 4. –¢–µ—Å—Ç–æ–≤–∏–π Pull Request ‚úÖ
- –°—Ç–≤–æ—Ä–∏–≤ —Ç–µ—Å—Ç–æ–≤—É –≥—ñ–ª–∫—É: `test/increase-nodes-and-upgrade-machine`
- –í–Ω–µ—Å–µ–Ω—ñ –∑–º—ñ–Ω–∏ –≤ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  - **–ó–±—ñ–ª—å—à–µ–Ω–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–¥**: –∑ 2 –¥–æ 3
  - **–ü–æ–∫—Ä–∞—â–µ–Ω–æ —Ç–∏–ø –º–∞—à–∏–Ω–∏**: –∑ `g1-small` –Ω–∞ `e2-medium`
- –í—ñ–¥–ø—Ä–∞–≤–∏–≤ –≥—ñ–ª–∫—É –Ω–∞ GitHub

## üîß –©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏ –≤—Ä—É—á–Ω—É

### –ö—Ä–æ–∫ 1: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Infracost API –∫–ª—é—á

1. **–û—Ç—Ä–∏–º–∞–π—Ç–µ API –∫–ª—é—á Infracost:**
   - –í—ñ–¥–≤—ñ–¥–∞–π—Ç–µ https://www.infracost.io/ —Ç–∞ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ—Å—è (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)
   - –ê–ë–û —á–µ—Ä–µ–∑ Google Cloud Shell:
     ```bash
     # –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Infracost
     curl -fsSL https://raw.githubusercontent.com/infracost/infracost/master/scripts/install.sh | sh
     
     # –ê–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—å —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ API –∫–ª—é—á
     infracost auth login
     infracost configure get api_key
     ```

2. **–î–æ–¥–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç —É GitHub:**
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å: https://github.com/Sadko-Vadym/Infracost/settings/secrets/actions
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "New repository secret"
   - –Ü–º'—è: `INFRACOST_API_KEY`
   - –ó–Ω–∞—á–µ–Ω–Ω—è: (–≤—Å—Ç–∞–≤—Ç–µ –≤–∞—à API –∫–ª—é—á)
   - –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Add secret"

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ Pull Request

1. **–ü–µ—Ä–µ–π–¥—ñ—Ç—å –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é:**
   - https://github.com/Sadko-Vadym/Infracost/pull/new/test/increase-nodes-and-upgrade-machine

2. **–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –¥–µ—Ç–∞–ª—ñ PR:**
   - Base branch: `main`
   - Compare branch: `test/increase-nodes-and-upgrade-machine`
   - Title: "Upgrade GKE Infrastructure: Increase nodes and improve machine type"
   - Description: —Å–∫–æ–ø—ñ—é–π—Ç–µ –∑ —Ñ–∞–π–ª—É `PR_DESCRIPTION.md`

3. **–°—Ç–≤–æ—Ä—ñ—Ç—å PR** –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ "Create pull request"

### –ö—Ä–æ–∫ 3: –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–∞—Ö–∏—Å—Ç –≥—ñ–ª–∫–∏ main (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: https://github.com/Sadko-Vadym/Infracost/settings/branches
2. –î–æ–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –∑–∞—Ö–∏—Å—Ç—É –¥–ª—è –≥—ñ–ª–∫–∏ `main`
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å:
   - ‚úÖ Require a pull request before merging
   - ‚úÖ Require status checks to pass before merging

## üìä –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PR, Infracost –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
1. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î –∑–º—ñ–Ω–∏ –≤ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ñ
2. –†–æ–∑—Ä–∞—Ö—É—î –≤–∞—Ä—Ç—ñ—Å—Ç—å –ø–æ—Ç–æ—á–Ω–æ—ó —Ç–∞ –Ω–æ–≤–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
3. –î–æ–¥–∞—Å—Ç—å –∫–æ–º–µ–Ω—Ç–∞—Ä –¥–æ PR –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è–º –≤–∏—Ç—Ä–∞—Ç

–ü—Ä–∏–±–ª–∏–∑–Ω–∏–π –≤–∏–≥–ª—è–¥ –∫–æ–º–µ–Ω—Ç–∞—Ä—è:

```
Monthly cost estimate

RESOURCE                               BASELINE    CURRENT     DIFF
google_container_cluster.this         $72.00      $72.00      $0.00
google_container_node_pool.this       ~$29.00     ~$103.00    +$74.00
  ‚îî‚îÄ 2 x g1-small                      (~$14.50)   -           -$29.00
  ‚îî‚îÄ 3 x e2-medium                     -           (~$34.33)   +$103.00

TOTAL                                  ~$101.00    ~$175.00    +$74.00 (+73%)
```

## üìÅ –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏

1. **`.github/workflows/infracost.yml`** - GitHub Actions workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏—Ç—Ä–∞—Ç
2. **`INFRACOST_SETUP.md`** - –ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é)
3. **`TASK_COMPLETION.md`** - –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –≥–∞–π–¥ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è (–∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é)
4. **`PR_DESCRIPTION.md`** - –®–∞–±–ª–æ–Ω –æ–ø–∏—Å—É –¥–ª—è Pull Request
5. **`terraform.tfvars.example`** - –ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–π–ª—É –∑—ñ –∑–º—ñ–Ω–Ω–∏–º–∏ Terraform
6. **`.gitignore`** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ Terraform

## üîó –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- **–í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**: https://github.com/Sadko-Vadym/Infracost
- **–°—Ç–≤–æ—Ä–∏—Ç–∏ PR**: https://github.com/Sadko-Vadym/Infracost/pull/new/test/increase-nodes-and-upgrade-machine
- **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤**: https://github.com/Sadko-Vadym/Infracost/settings/secrets/actions
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Infracost**: https://www.infracost.io/docs/
- **–û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**: https://github.com/den-vasyliev/tf-google-gke-cluster

## üéØ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è

- [x] –§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
- [x] –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —É –ª–æ–∫–∞–ª—å–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é
- [x] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Terraform
- [x] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è GitHub Actions workflow –¥–ª—è Infracost
- [x] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ—ó –≥—ñ–ª–∫–∏ –∑—ñ –∑–º—ñ–Ω–∞–º–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
- [x] –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∑–º—ñ–Ω –Ω–∞ GitHub
- [ ] **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ INFRACOST_API_KEY –≤ GitHub** ‚¨ÖÔ∏è **–ó–†–û–ë–Ü–¢–¨ –¶–ï –ó–ê–†–ê–ó**
- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ Pull Request** ‚¨ÖÔ∏è **–ù–ê–°–¢–£–ü–ù–ò–ô –ö–†–û–ö**
- [ ] –î–æ—á–µ–∫–∞—Ç–∏—Å—è –∞–Ω–∞–ª—ñ–∑—É Infracost
- [ ] –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Ü—ñ–Ω–∫—É –≤–∏—Ç—Ä–∞—Ç
- [ ] (–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–∞—Ö–∏—Å—Ç –≥—ñ–ª–∫–∏ main

## üìù –§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –∑–¥–∞—á—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Pull Request, –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±—É–¥–µ —É —Ñ–æ—Ä–º–∞—Ç—ñ:

```
https://github.com/Sadko-Vadym/Infracost/pull/1
```

## üí° –©–æ –¥–∞–ª—ñ?

1. **–î–æ–¥–∞–π—Ç–µ Infracost API –∫–ª—é—á** —É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è GitHub (–¥–∏–≤. –ö—Ä–æ–∫ 1)
2. **–°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request** –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –≤–∏—â–µ (–¥–∏–≤. –ö—Ä–æ–∫ 2)
3. **–ù–∞–¥–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ PR** —è–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∑–∞–≤–¥–∞–Ω–Ω—è

Infracost –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î –∑–º—ñ–Ω–∏ —Ç–∞ –ø–æ–∫–∞–∂–µ, —è–∫ –≤–æ–Ω–∏ –≤–ø–ª–∏–Ω—É—Ç—å –Ω–∞ —â–æ–º—ñ—Å—è—á–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É! üöÄ

---

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –¥–æ —Ä—É—á–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è! –í–∏–∫–æ–Ω–∞–π—Ç–µ –ö—Ä–æ–∫–∏ 1 —Ç–∞ 2 –≤–∏—â–µ –¥–ª—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è.

